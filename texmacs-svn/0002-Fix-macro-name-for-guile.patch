From d79f2d3077f496e21163b52c06f8342f877f762d Mon Sep 17 00:00:00 2001
From: wangjiezhe <wangjiezhe@gmail.com>
Date: Mon, 23 May 2016 13:51:51 +0800
Subject: [PATCH 2/2] Fix macro name for guile

---
 misc/m4/guile.m4           | 2 ++
 src/System/tm_configure.in | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/misc/m4/guile.m4 b/misc/m4/guile.m4
index c131416..53c8215 100644
--- a/misc/m4/guile.m4
+++ b/misc/m4/guile.m4
@@ -69,9 +69,11 @@ AC_DEFUN([LC_WITH_GUILE],[
   unset LC_WITH_GUILE_tmp1 LC_WITH_GUILE_tmp2
 
   GUILE_BIN="$GUILE_LIB"
+  GUILE_BIN_NODOT=${GILE_BIN//./}
   GUILE_CONFIG="$guile_config"
   GUILE_CFLAGS="$GUILE_CPPFLAGS"
   AC_SUBST(GUILE_BIN)
+  AC_SUBST(GUILE_BIN_NODOT)
   AC_SUBST(GUILE_CFLAGS)
 
   GUILE_EFFECTIVE_VERSION=`$GUILE_BIN -c '(display (version))'`
diff --git a/src/System/tm_configure.in b/src/System/tm_configure.in
index 03c4ce7..cc90a73 100644
--- a/src/System/tm_configure.in
+++ b/src/System/tm_configure.in
@@ -19,7 +19,7 @@
 #define TEXMACS_SOURCES "@tmorig@"
 #define OS_@CONFIG_OS@
 #define GUILE_@CONFIG_GUILE_SERIAL@
-#define GUILE_BIN_@GUILE_BIN@
+#define GUILE_BIN_@GUILE_BIN_NODOT@
 #define WORD_LENGTH @CONFIG_WORD_LENGTH@
 #define WORD_LENGTH_INC @CONFIG_WORD_LENGTH_INC@
 #define WORD_MASK @CONFIG_WORD_MASK@
-- 
2.8.3

